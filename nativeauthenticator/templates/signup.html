{% extends "page.html" %}
{% block main %}
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    let button = document.getElementById('eye');
    button.addEventListener("click", function(e) {
        let pwd = document.getElementById("pwd");
        if (pwd.getAttribute("type") === "password") {
            pwd.setAttribute("type", "text");
            button.textContent = "üîë";
        } else {
            pwd.setAttribute("type", "password");
            button.textContent = "üëÅ";
        }
    });
});
</script>
{% block login %}
<div id="login-main" class="container">
    <form action="{{post_url}}" method="post" role="form">
        <div class="auth-form-header">
            Sign Up
        </div>
        <div class='auth-form-body'>
            <label for="username_input">Username:</label>
            <input type="text" class="form-control" name="username" id="username_input" tabindex="2" required />
            {% if ask_email %}
            <label for="email_input">Email:</label>
            <input type="email" class="form-control" name="email" id="email_input" tabindex="2" required />
            {% endif %}
            <label for="pwd">Password:</label>
            <div class="input-group">
                <input type="password" class="form-control" name="pw" id="pwd" tabindex="2" required />
                <span class="input-group-addon">
                    <button style="border:0;" type="button" id="eye">
                        üëÅ
                    </button>
                </span>
            </div>
            <p></p>
            {% if two_factor_auth %}
            <label for="2fa">Add two factor authentication:</label>
            <input type="checkbox" name="2fa" value="2fa" id="2fa">
            {% endif %}
            <input type="submit" id="signup_submit" class='btn btn-jupyter' value='Create User' tabindex="3" />
            <div style="padding-top: 25px;">
                Already have an account? <a href="{{ base_url }}login">Login!</a>
            </div>
            {% if alert %}
            <div class="alert {{alert}}" style="margin-top: 15px;" role="alert">
                {{result_message}}
                {% if two_factor_auth_user %}
                    <br />
                    <strong>Attention!</strong> You have configured two factor authentication.
                    <br />
                    Your two factor authentication code is <strong>{{ two_factor_auth_value }}</strong>. Be sure to keep it safe :)
                    {% endif %}
            </div>
            {% endif %}
        </div>
    </form>
</div>
{% endblock login %}
{% endblock %}
